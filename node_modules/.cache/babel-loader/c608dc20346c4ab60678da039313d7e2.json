{"ast":null,"code":"/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __extends, __rest } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { AbstractPureComponent2, DISPLAYNAME_PREFIX, InputGroup, Keys, Popover, PopoverInteractionKind, Position, refHandler, setRef } from \"@blueprintjs/core\";\nimport { Classes } from \"../../common\";\nimport { QueryList } from \"../query-list/queryList\";\n\nvar Suggest =\n/** @class */\nfunction (_super) {\n  __extends(Suggest, _super);\n\n  function Suggest() {\n    var _a;\n\n    var _this = _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isOpen: _this.props.popoverProps != null && _this.props.popoverProps.isOpen || false,\n      selectedItem: _this.getInitialSelectedItem()\n    };\n    _this.TypedQueryList = QueryList.ofType();\n    _this.inputElement = null;\n    _this.queryList = null;\n    _this.handleInputRef = refHandler(_this, \"inputElement\", (_a = _this.props.inputProps) === null || _a === void 0 ? void 0 : _a.inputRef);\n\n    _this.handleQueryListRef = function (ref) {\n      return _this.queryList = ref;\n    };\n\n    _this.renderQueryList = function (listProps) {\n      var _a = _this.props,\n          fill = _a.fill,\n          _b = _a.inputProps,\n          inputProps = _b === void 0 ? {} : _b,\n          _c = _a.popoverProps,\n          popoverProps = _c === void 0 ? {} : _c;\n      var _d = _this.state,\n          isOpen = _d.isOpen,\n          selectedItem = _d.selectedItem;\n      var handleKeyDown = listProps.handleKeyDown,\n          handleKeyUp = listProps.handleKeyUp;\n      var _e = inputProps.autoComplete,\n          autoComplete = _e === void 0 ? \"off\" : _e,\n          _f = inputProps.placeholder,\n          placeholder = _f === void 0 ? \"Search...\" : _f;\n      var selectedItemText = selectedItem ? _this.props.inputValueRenderer(selectedItem) : \"\"; // placeholder shows selected item while open.\n\n      var inputPlaceholder = isOpen && selectedItemText ? selectedItemText : placeholder; // value shows query when open, and query remains when closed if nothing is selected.\n      // if resetOnClose is enabled, then hide query when not open. (see handlePopoverOpening)\n\n      var inputValue = isOpen ? listProps.query : selectedItemText || (_this.props.resetOnClose ? \"\" : listProps.query);\n\n      if (fill) {\n        popoverProps.fill = true;\n        inputProps.fill = true;\n      }\n\n      return (\n        /* eslint-disable-next-line deprecation/deprecation */\n        React.createElement(Popover, __assign({\n          autoFocus: false,\n          enforceFocus: false,\n          isOpen: isOpen,\n          position: Position.BOTTOM_LEFT\n        }, popoverProps, {\n          className: classNames(listProps.className, popoverProps.className),\n          interactionKind: PopoverInteractionKind.CLICK,\n          onInteraction: _this.handlePopoverInteraction,\n          popoverClassName: classNames(Classes.SELECT_POPOVER, popoverProps.popoverClassName),\n          onOpening: _this.handlePopoverOpening,\n          onOpened: _this.handlePopoverOpened\n        }), React.createElement(InputGroup, __assign({\n          autoComplete: autoComplete,\n          disabled: _this.props.disabled\n        }, inputProps, {\n          inputRef: _this.handleInputRef,\n          onChange: listProps.handleQueryChange,\n          onFocus: _this.handleInputFocus,\n          onKeyDown: _this.getTargetKeyDownHandler(handleKeyDown),\n          onKeyUp: _this.getTargetKeyUpHandler(handleKeyUp),\n          placeholder: inputPlaceholder,\n          value: inputValue\n        })), React.createElement(\"div\", {\n          onKeyDown: handleKeyDown,\n          onKeyUp: handleKeyUp\n        }, listProps.itemList))\n      );\n    };\n\n    _this.selectText = function () {\n      // wait until the input is properly focused to select the text inside of it\n      _this.requestAnimationFrame(function () {\n        var _a;\n\n        (_a = _this.inputElement) === null || _a === void 0 ? void 0 : _a.setSelectionRange(0, _this.inputElement.value.length);\n      });\n    };\n\n    _this.handleInputFocus = function (event) {\n      var _a, _b;\n\n      _this.selectText(); // TODO can we leverage Popover.openOnTargetFocus for this?\n\n\n      if (!_this.props.openOnKeyDown) {\n        _this.setState({\n          isOpen: true\n        });\n      }\n\n      (_b = (_a = _this.props.inputProps) === null || _a === void 0 ? void 0 : _a.onFocus) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    };\n\n    _this.handleItemSelect = function (item, event) {\n      var _a, _b, _c, _d;\n\n      var nextOpenState;\n\n      if (!_this.props.closeOnSelect) {\n        (_a = _this.inputElement) === null || _a === void 0 ? void 0 : _a.focus();\n\n        _this.selectText();\n\n        nextOpenState = true;\n      } else {\n        (_b = _this.inputElement) === null || _b === void 0 ? void 0 : _b.blur();\n        nextOpenState = false;\n      } // the internal state should only change when uncontrolled.\n\n\n      if (_this.props.selectedItem === undefined) {\n        _this.setState({\n          isOpen: nextOpenState,\n          selectedItem: item\n        });\n      } else {\n        // otherwise just set the next open state.\n        _this.setState({\n          isOpen: nextOpenState\n        });\n      }\n\n      (_d = (_c = _this.props).onItemSelect) === null || _d === void 0 ? void 0 : _d.call(_c, item, event);\n    }; // Popover interaction kind is CLICK, so this only handles click events.\n    // Note that we defer to the next animation frame in order to get the latest document.activeElement\n\n\n    _this.handlePopoverInteraction = function (nextOpenState, event) {\n      return _this.requestAnimationFrame(function () {\n        var _a, _b;\n\n        var isInputFocused = _this.inputElement === document.activeElement;\n\n        if (_this.inputElement != null && !isInputFocused) {\n          // the input is no longer focused, we should close the popover\n          _this.setState({\n            isOpen: false\n          });\n        }\n\n        (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onInteraction) === null || _b === void 0 ? void 0 : _b.call(_a, nextOpenState, event);\n      });\n    };\n\n    _this.handlePopoverOpening = function (node) {\n      var _a, _b; // reset query before opening instead of when closing to prevent flash of unfiltered items.\n      // this is a limitation of the interactions between QueryList state and Popover transitions.\n\n\n      if (_this.props.resetOnClose && _this.queryList) {\n        _this.queryList.setQuery(\"\", true);\n      }\n\n      (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onOpening) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n    };\n\n    _this.handlePopoverOpened = function (node) {\n      var _a, _b; // scroll active item into view after popover transition completes and all dimensions are stable.\n\n\n      if (_this.queryList != null) {\n        _this.queryList.scrollActiveItemIntoView();\n      }\n\n      (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onOpened) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n    };\n\n    _this.getTargetKeyDownHandler = function (handleQueryListKeyDown) {\n      return function (evt) {\n        var _a, _b, _c; // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n        // eslint-disable-next-line deprecation/deprecation\n\n\n        var which = evt.which;\n\n        if (which === Keys.ESCAPE || which === Keys.TAB) {\n          (_a = _this.inputElement) === null || _a === void 0 ? void 0 : _a.blur();\n\n          _this.setState({\n            isOpen: false\n          });\n        } else if (_this.props.openOnKeyDown && which !== Keys.BACKSPACE && which !== Keys.ARROW_LEFT && which !== Keys.ARROW_RIGHT) {\n          _this.setState({\n            isOpen: true\n          });\n        }\n\n        if (_this.state.isOpen) {\n          handleQueryListKeyDown === null || handleQueryListKeyDown === void 0 ? void 0 : handleQueryListKeyDown(evt);\n        }\n\n        (_c = (_b = _this.props.inputProps) === null || _b === void 0 ? void 0 : _b.onKeyDown) === null || _c === void 0 ? void 0 : _c.call(_b, evt);\n      };\n    };\n\n    _this.getTargetKeyUpHandler = function (handleQueryListKeyUp) {\n      return function (evt) {\n        var _a, _b;\n\n        if (_this.state.isOpen) {\n          handleQueryListKeyUp === null || handleQueryListKeyUp === void 0 ? void 0 : handleQueryListKeyUp(evt);\n        }\n\n        (_b = (_a = _this.props.inputProps) === null || _a === void 0 ? void 0 : _a.onKeyUp) === null || _b === void 0 ? void 0 : _b.call(_a, evt);\n      };\n    };\n\n    return _this;\n  }\n\n  Suggest.ofType = function () {\n    return Suggest;\n  };\n\n  Suggest.prototype.render = function () {\n    var _a; // omit props specific to this component, spread the rest.\n\n\n    var _b = this.props,\n        disabled = _b.disabled,\n        inputProps = _b.inputProps,\n        popoverProps = _b.popoverProps,\n        restProps = __rest(_b, [\"disabled\", \"inputProps\", \"popoverProps\"]);\n\n    return React.createElement(this.TypedQueryList, __assign({}, restProps, {\n      initialActiveItem: (_a = this.props.selectedItem) !== null && _a !== void 0 ? _a : undefined,\n      onItemSelect: this.handleItemSelect,\n      ref: this.handleQueryListRef,\n      renderer: this.renderQueryList\n    }));\n  };\n\n  Suggest.prototype.componentDidUpdate = function (prevProps, prevState) {\n    var _this = this;\n\n    var _a, _b, _c, _d, _e, _f, _g;\n\n    if (((_a = prevProps.inputProps) === null || _a === void 0 ? void 0 : _a.inputRef) !== ((_b = this.props.inputProps) === null || _b === void 0 ? void 0 : _b.inputRef)) {\n      setRef((_c = prevProps.inputProps) === null || _c === void 0 ? void 0 : _c.inputRef, null);\n      this.handleInputRef = refHandler(this, \"inputElement\", (_d = this.props.inputProps) === null || _d === void 0 ? void 0 : _d.inputRef);\n      setRef((_e = this.props.inputProps) === null || _e === void 0 ? void 0 : _e.inputRef, this.inputElement);\n    } // If the selected item prop changes, update the underlying state.\n\n\n    if (this.props.selectedItem !== undefined && this.props.selectedItem !== this.state.selectedItem) {\n      this.setState({\n        selectedItem: this.props.selectedItem\n      });\n    }\n\n    if (this.state.isOpen === false && prevState.isOpen === true) {\n      // just closed, likely by keyboard interaction\n      // wait until the transition ends so there isn't a flash of content in the popover\n\n      /* eslint-disable-next-line deprecation/deprecation */\n      var timeout = (_g = (_f = this.props.popoverProps) === null || _f === void 0 ? void 0 : _f.transitionDuration) !== null && _g !== void 0 ? _g : Popover.defaultProps.transitionDuration;\n      setTimeout(function () {\n        return _this.maybeResetActiveItemToSelectedItem();\n      }, timeout);\n    }\n\n    if (this.state.isOpen && !prevState.isOpen && this.queryList != null) {\n      this.queryList.scrollActiveItemIntoView();\n    }\n  };\n\n  Suggest.prototype.getInitialSelectedItem = function () {\n    // controlled > uncontrolled > default\n    if (this.props.selectedItem !== undefined) {\n      return this.props.selectedItem;\n    } else if (this.props.defaultSelectedItem !== undefined) {\n      return this.props.defaultSelectedItem;\n    } else {\n      return null;\n    }\n  };\n\n  Suggest.prototype.maybeResetActiveItemToSelectedItem = function () {\n    var _a;\n\n    var shouldResetActiveItemToSelectedItem = this.props.activeItem === undefined && this.state.selectedItem !== null && !this.props.resetOnSelect;\n\n    if (this.queryList !== null && shouldResetActiveItemToSelectedItem) {\n      this.queryList.setActiveItem((_a = this.props.selectedItem) !== null && _a !== void 0 ? _a : this.state.selectedItem);\n    }\n  };\n\n  Suggest.displayName = DISPLAYNAME_PREFIX + \".Suggest\";\n  Suggest.defaultProps = {\n    closeOnSelect: true,\n    fill: false,\n    openOnKeyDown: false,\n    resetOnClose: false\n  };\n  return Suggest;\n}(AbstractPureComponent2);\n\nexport { Suggest };","map":{"version":3,"sources":["../../../../src/components/select/suggest.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __extends, __rest } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { AbstractPureComponent2, DISPLAYNAME_PREFIX, InputGroup, Keys, Popover, PopoverInteractionKind, Position, refHandler, setRef, } from \"@blueprintjs/core\";\nimport { Classes } from \"../../common\";\nimport { QueryList } from \"../query-list/queryList\";\nvar Suggest = /** @class */ (function (_super) {\n    __extends(Suggest, _super);\n    function Suggest() {\n        var _a;\n        var _this = _super.apply(this, arguments) || this;\n        _this.state = {\n            isOpen: (_this.props.popoverProps != null && _this.props.popoverProps.isOpen) || false,\n            selectedItem: _this.getInitialSelectedItem(),\n        };\n        _this.TypedQueryList = QueryList.ofType();\n        _this.inputElement = null;\n        _this.queryList = null;\n        _this.handleInputRef = refHandler(_this, \"inputElement\", (_a = _this.props.inputProps) === null || _a === void 0 ? void 0 : _a.inputRef);\n        _this.handleQueryListRef = function (ref) { return (_this.queryList = ref); };\n        _this.renderQueryList = function (listProps) {\n            var _a = _this.props, fill = _a.fill, _b = _a.inputProps, inputProps = _b === void 0 ? {} : _b, _c = _a.popoverProps, popoverProps = _c === void 0 ? {} : _c;\n            var _d = _this.state, isOpen = _d.isOpen, selectedItem = _d.selectedItem;\n            var handleKeyDown = listProps.handleKeyDown, handleKeyUp = listProps.handleKeyUp;\n            var _e = inputProps.autoComplete, autoComplete = _e === void 0 ? \"off\" : _e, _f = inputProps.placeholder, placeholder = _f === void 0 ? \"Search...\" : _f;\n            var selectedItemText = selectedItem ? _this.props.inputValueRenderer(selectedItem) : \"\";\n            // placeholder shows selected item while open.\n            var inputPlaceholder = isOpen && selectedItemText ? selectedItemText : placeholder;\n            // value shows query when open, and query remains when closed if nothing is selected.\n            // if resetOnClose is enabled, then hide query when not open. (see handlePopoverOpening)\n            var inputValue = isOpen\n                ? listProps.query\n                : selectedItemText || (_this.props.resetOnClose ? \"\" : listProps.query);\n            if (fill) {\n                popoverProps.fill = true;\n                inputProps.fill = true;\n            }\n            return (\n            /* eslint-disable-next-line deprecation/deprecation */\n            React.createElement(Popover, __assign({ autoFocus: false, enforceFocus: false, isOpen: isOpen, position: Position.BOTTOM_LEFT }, popoverProps, { className: classNames(listProps.className, popoverProps.className), interactionKind: PopoverInteractionKind.CLICK, onInteraction: _this.handlePopoverInteraction, popoverClassName: classNames(Classes.SELECT_POPOVER, popoverProps.popoverClassName), onOpening: _this.handlePopoverOpening, onOpened: _this.handlePopoverOpened }),\n                React.createElement(InputGroup, __assign({ autoComplete: autoComplete, disabled: _this.props.disabled }, inputProps, { inputRef: _this.handleInputRef, onChange: listProps.handleQueryChange, onFocus: _this.handleInputFocus, onKeyDown: _this.getTargetKeyDownHandler(handleKeyDown), onKeyUp: _this.getTargetKeyUpHandler(handleKeyUp), placeholder: inputPlaceholder, value: inputValue })),\n                React.createElement(\"div\", { onKeyDown: handleKeyDown, onKeyUp: handleKeyUp }, listProps.itemList)));\n        };\n        _this.selectText = function () {\n            // wait until the input is properly focused to select the text inside of it\n            _this.requestAnimationFrame(function () {\n                var _a;\n                (_a = _this.inputElement) === null || _a === void 0 ? void 0 : _a.setSelectionRange(0, _this.inputElement.value.length);\n            });\n        };\n        _this.handleInputFocus = function (event) {\n            var _a, _b;\n            _this.selectText();\n            // TODO can we leverage Popover.openOnTargetFocus for this?\n            if (!_this.props.openOnKeyDown) {\n                _this.setState({ isOpen: true });\n            }\n            (_b = (_a = _this.props.inputProps) === null || _a === void 0 ? void 0 : _a.onFocus) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n        };\n        _this.handleItemSelect = function (item, event) {\n            var _a, _b, _c, _d;\n            var nextOpenState;\n            if (!_this.props.closeOnSelect) {\n                (_a = _this.inputElement) === null || _a === void 0 ? void 0 : _a.focus();\n                _this.selectText();\n                nextOpenState = true;\n            }\n            else {\n                (_b = _this.inputElement) === null || _b === void 0 ? void 0 : _b.blur();\n                nextOpenState = false;\n            }\n            // the internal state should only change when uncontrolled.\n            if (_this.props.selectedItem === undefined) {\n                _this.setState({\n                    isOpen: nextOpenState,\n                    selectedItem: item,\n                });\n            }\n            else {\n                // otherwise just set the next open state.\n                _this.setState({ isOpen: nextOpenState });\n            }\n            (_d = (_c = _this.props).onItemSelect) === null || _d === void 0 ? void 0 : _d.call(_c, item, event);\n        };\n        // Popover interaction kind is CLICK, so this only handles click events.\n        // Note that we defer to the next animation frame in order to get the latest document.activeElement\n        _this.handlePopoverInteraction = function (nextOpenState, event) {\n            return _this.requestAnimationFrame(function () {\n                var _a, _b;\n                var isInputFocused = _this.inputElement === document.activeElement;\n                if (_this.inputElement != null && !isInputFocused) {\n                    // the input is no longer focused, we should close the popover\n                    _this.setState({ isOpen: false });\n                }\n                (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onInteraction) === null || _b === void 0 ? void 0 : _b.call(_a, nextOpenState, event);\n            });\n        };\n        _this.handlePopoverOpening = function (node) {\n            var _a, _b;\n            // reset query before opening instead of when closing to prevent flash of unfiltered items.\n            // this is a limitation of the interactions between QueryList state and Popover transitions.\n            if (_this.props.resetOnClose && _this.queryList) {\n                _this.queryList.setQuery(\"\", true);\n            }\n            (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onOpening) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n        };\n        _this.handlePopoverOpened = function (node) {\n            var _a, _b;\n            // scroll active item into view after popover transition completes and all dimensions are stable.\n            if (_this.queryList != null) {\n                _this.queryList.scrollActiveItemIntoView();\n            }\n            (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onOpened) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n        };\n        _this.getTargetKeyDownHandler = function (handleQueryListKeyDown) {\n            return function (evt) {\n                var _a, _b, _c;\n                // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n                // eslint-disable-next-line deprecation/deprecation\n                var which = evt.which;\n                if (which === Keys.ESCAPE || which === Keys.TAB) {\n                    (_a = _this.inputElement) === null || _a === void 0 ? void 0 : _a.blur();\n                    _this.setState({ isOpen: false });\n                }\n                else if (_this.props.openOnKeyDown &&\n                    which !== Keys.BACKSPACE &&\n                    which !== Keys.ARROW_LEFT &&\n                    which !== Keys.ARROW_RIGHT) {\n                    _this.setState({ isOpen: true });\n                }\n                if (_this.state.isOpen) {\n                    handleQueryListKeyDown === null || handleQueryListKeyDown === void 0 ? void 0 : handleQueryListKeyDown(evt);\n                }\n                (_c = (_b = _this.props.inputProps) === null || _b === void 0 ? void 0 : _b.onKeyDown) === null || _c === void 0 ? void 0 : _c.call(_b, evt);\n            };\n        };\n        _this.getTargetKeyUpHandler = function (handleQueryListKeyUp) {\n            return function (evt) {\n                var _a, _b;\n                if (_this.state.isOpen) {\n                    handleQueryListKeyUp === null || handleQueryListKeyUp === void 0 ? void 0 : handleQueryListKeyUp(evt);\n                }\n                (_b = (_a = _this.props.inputProps) === null || _a === void 0 ? void 0 : _a.onKeyUp) === null || _b === void 0 ? void 0 : _b.call(_a, evt);\n            };\n        };\n        return _this;\n    }\n    Suggest.ofType = function () {\n        return Suggest;\n    };\n    Suggest.prototype.render = function () {\n        var _a;\n        // omit props specific to this component, spread the rest.\n        var _b = this.props, disabled = _b.disabled, inputProps = _b.inputProps, popoverProps = _b.popoverProps, restProps = __rest(_b, [\"disabled\", \"inputProps\", \"popoverProps\"]);\n        return (React.createElement(this.TypedQueryList, __assign({}, restProps, { initialActiveItem: (_a = this.props.selectedItem) !== null && _a !== void 0 ? _a : undefined, onItemSelect: this.handleItemSelect, ref: this.handleQueryListRef, renderer: this.renderQueryList })));\n    };\n    Suggest.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var _this = this;\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (((_a = prevProps.inputProps) === null || _a === void 0 ? void 0 : _a.inputRef) !== ((_b = this.props.inputProps) === null || _b === void 0 ? void 0 : _b.inputRef)) {\n            setRef((_c = prevProps.inputProps) === null || _c === void 0 ? void 0 : _c.inputRef, null);\n            this.handleInputRef = refHandler(this, \"inputElement\", (_d = this.props.inputProps) === null || _d === void 0 ? void 0 : _d.inputRef);\n            setRef((_e = this.props.inputProps) === null || _e === void 0 ? void 0 : _e.inputRef, this.inputElement);\n        }\n        // If the selected item prop changes, update the underlying state.\n        if (this.props.selectedItem !== undefined && this.props.selectedItem !== this.state.selectedItem) {\n            this.setState({ selectedItem: this.props.selectedItem });\n        }\n        if (this.state.isOpen === false && prevState.isOpen === true) {\n            // just closed, likely by keyboard interaction\n            // wait until the transition ends so there isn't a flash of content in the popover\n            /* eslint-disable-next-line deprecation/deprecation */\n            var timeout = (_g = (_f = this.props.popoverProps) === null || _f === void 0 ? void 0 : _f.transitionDuration) !== null && _g !== void 0 ? _g : Popover.defaultProps.transitionDuration;\n            setTimeout(function () { return _this.maybeResetActiveItemToSelectedItem(); }, timeout);\n        }\n        if (this.state.isOpen && !prevState.isOpen && this.queryList != null) {\n            this.queryList.scrollActiveItemIntoView();\n        }\n    };\n    Suggest.prototype.getInitialSelectedItem = function () {\n        // controlled > uncontrolled > default\n        if (this.props.selectedItem !== undefined) {\n            return this.props.selectedItem;\n        }\n        else if (this.props.defaultSelectedItem !== undefined) {\n            return this.props.defaultSelectedItem;\n        }\n        else {\n            return null;\n        }\n    };\n    Suggest.prototype.maybeResetActiveItemToSelectedItem = function () {\n        var _a;\n        var shouldResetActiveItemToSelectedItem = this.props.activeItem === undefined && this.state.selectedItem !== null && !this.props.resetOnSelect;\n        if (this.queryList !== null && shouldResetActiveItemToSelectedItem) {\n            this.queryList.setActiveItem((_a = this.props.selectedItem) !== null && _a !== void 0 ? _a : this.state.selectedItem);\n        }\n    };\n    Suggest.displayName = DISPLAYNAME_PREFIX + \".Suggest\";\n    Suggest.defaultProps = {\n        closeOnSelect: true,\n        fill: false,\n        openOnKeyDown: false,\n        resetOnClose: false,\n    };\n    return Suggest;\n}(AbstractPureComponent2));\nexport { Suggest };\n//# sourceMappingURL=suggest.js.map"]},"metadata":{},"sourceType":"module"}