{"ast":null,"code":"/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __decorate, __extends, __spreadArrays } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport DayPicker from \"react-day-picker\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Boundary, DISPLAYNAME_PREFIX, Divider } from \"@blueprintjs/core\";\nimport * as DateClasses from \"./common/classes\";\nimport * as DateUtils from \"./common/dateUtils\";\nimport * as Errors from \"./common/errors\";\nimport { MonthAndYear } from \"./common/monthAndYear\";\nimport { DatePickerCaption } from \"./datePickerCaption\";\nimport { combineModifiers, getDefaultMaxDate, getDefaultMinDate, HOVERED_RANGE_MODIFIER, SELECTED_RANGE_MODIFIER } from \"./datePickerCore\";\nimport { DatePickerNavbar } from \"./datePickerNavbar\";\nimport { DateRangeSelectionStrategy } from \"./dateRangeSelectionStrategy\";\nimport { Shortcuts } from \"./shortcuts\";\nimport { TimePicker } from \"./timePicker\";\n\nvar DateRangePicker =\n/** @class */\nfunction (_super) {\n  __extends(DateRangePicker, _super);\n\n  function DateRangePicker(props, context) {\n    var _a;\n\n    var _this = _super.call(this, props, context) || this; // these will get merged with the user's own\n\n\n    _this.modifiers = (_a = {}, _a[SELECTED_RANGE_MODIFIER] = function (day) {\n      var value = _this.state.value;\n      return value[0] != null && value[1] != null && DateUtils.isDayInRange(day, value, true);\n    }, _a[SELECTED_RANGE_MODIFIER + \"-start\"] = function (day) {\n      return DateUtils.areSameDay(_this.state.value[0], day);\n    }, _a[SELECTED_RANGE_MODIFIER + \"-end\"] = function (day) {\n      return DateUtils.areSameDay(_this.state.value[1], day);\n    }, _a[HOVERED_RANGE_MODIFIER] = function (day) {\n      var _a = _this.state,\n          hoverValue = _a.hoverValue,\n          _b = _a.value,\n          selectedStart = _b[0],\n          selectedEnd = _b[1];\n\n      if (selectedStart == null && selectedEnd == null) {\n        return false;\n      }\n\n      if (hoverValue == null || hoverValue[0] == null || hoverValue[1] == null) {\n        return false;\n      }\n\n      return DateUtils.isDayInRange(day, hoverValue, true);\n    }, _a[HOVERED_RANGE_MODIFIER + \"-start\"] = function (day) {\n      var hoverValue = _this.state.hoverValue;\n\n      if (hoverValue == null || hoverValue[0] == null) {\n        return false;\n      }\n\n      return DateUtils.areSameDay(hoverValue[0], day);\n    }, _a[HOVERED_RANGE_MODIFIER + \"-end\"] = function (day) {\n      var hoverValue = _this.state.hoverValue;\n\n      if (hoverValue == null || hoverValue[1] == null) {\n        return false;\n      }\n\n      return DateUtils.areSameDay(hoverValue[1], day);\n    }, _a);\n\n    _this.shouldHighlightCurrentDay = function (date) {\n      var highlightCurrentDay = _this.props.highlightCurrentDay;\n      return highlightCurrentDay && DateUtils.isToday(date);\n    };\n\n    _this.getDateRangePickerModifiers = function () {\n      var modifiers = _this.props.modifiers;\n      return combineModifiers(_this.modifiers, __assign({\n        isToday: _this.shouldHighlightCurrentDay\n      }, modifiers));\n    };\n\n    _this.renderDay = function (day) {\n      var date = day.getDate();\n      return React.createElement(\"div\", {\n        className: DateClasses.DATEPICKER_DAY_WRAPPER\n      }, date);\n    };\n\n    _this.disabledDays = function (day) {\n      return !DateUtils.isDayInRange(day, [_this.props.minDate, _this.props.maxDate]);\n    };\n\n    _this.getDisabledDaysModifier = function () {\n      var disabledDays = _this.props.dayPickerProps.disabledDays;\n      return disabledDays instanceof Array ? __spreadArrays([_this.disabledDays], disabledDays) : [_this.disabledDays, disabledDays];\n    };\n\n    _this.handleTimeChange = function (newTime, dateIndex) {\n      var _a, _b, _c, _d;\n\n      (_b = (_a = _this.props.timePickerProps) === null || _a === void 0 ? void 0 : _a.onChange) === null || _b === void 0 ? void 0 : _b.call(_a, newTime);\n      var _e = _this.state,\n          value = _e.value,\n          time = _e.time;\n      var newValue = DateUtils.getDateTime(value[dateIndex] != null ? DateUtils.clone(value[dateIndex]) : new Date(), newTime);\n      var newDateRange = [value[0], value[1]];\n      newDateRange[dateIndex] = newValue;\n      var newTimeRange = [time[0], time[1]];\n      newTimeRange[dateIndex] = newTime;\n      (_d = (_c = _this.props).onChange) === null || _d === void 0 ? void 0 : _d.call(_c, newDateRange);\n\n      _this.setState({\n        value: newDateRange,\n        time: newTimeRange\n      });\n    };\n\n    _this.handleTimeChangeLeftCalendar = function (time) {\n      _this.handleTimeChange(time, 0);\n    };\n\n    _this.handleTimeChangeRightCalendar = function (time) {\n      _this.handleTimeChange(time, 1);\n    };\n\n    _this.renderSingleNavbar = function (navbarProps) {\n      return React.createElement(DatePickerNavbar, __assign({}, navbarProps, {\n        maxDate: _this.props.maxDate,\n        minDate: _this.props.minDate\n      }));\n    };\n\n    _this.renderLeftNavbar = function (navbarProps) {\n      return React.createElement(DatePickerNavbar, __assign({}, navbarProps, {\n        hideRightNavButton: _this.props.contiguousCalendarMonths,\n        maxDate: _this.props.maxDate,\n        minDate: _this.props.minDate\n      }));\n    };\n\n    _this.renderRightNavbar = function (navbarProps) {\n      return React.createElement(DatePickerNavbar, __assign({}, navbarProps, {\n        hideLeftNavButton: _this.props.contiguousCalendarMonths,\n        maxDate: _this.props.maxDate,\n        minDate: _this.props.minDate\n      }));\n    };\n\n    _this.renderSingleCaption = function (captionProps) {\n      return React.createElement(DatePickerCaption, __assign({}, captionProps, {\n        maxDate: _this.props.maxDate,\n        minDate: _this.props.minDate,\n        onMonthChange: _this.handleLeftMonthSelectChange,\n        onYearChange: _this.handleLeftYearSelectChange,\n        reverseMonthAndYearMenus: _this.props.reverseMonthAndYearMenus\n      }));\n    };\n\n    _this.renderLeftCaption = function (captionProps) {\n      return React.createElement(DatePickerCaption, __assign({}, captionProps, {\n        maxDate: DateUtils.getDatePreviousMonth(_this.props.maxDate),\n        minDate: _this.props.minDate,\n        onMonthChange: _this.handleLeftMonthSelectChange,\n        onYearChange: _this.handleLeftYearSelectChange,\n        reverseMonthAndYearMenus: _this.props.reverseMonthAndYearMenus\n      }));\n    };\n\n    _this.renderRightCaption = function (captionProps) {\n      return React.createElement(DatePickerCaption, __assign({}, captionProps, {\n        maxDate: _this.props.maxDate,\n        minDate: DateUtils.getDateNextMonth(_this.props.minDate),\n        onMonthChange: _this.handleRightMonthSelectChange,\n        onYearChange: _this.handleRightYearSelectChange,\n        reverseMonthAndYearMenus: _this.props.reverseMonthAndYearMenus\n      }));\n    };\n\n    _this.handleDayMouseEnter = function (day, modifiers, e) {\n      var _a, _b, _c, _d;\n\n      (_b = (_a = _this.props.dayPickerProps).onDayMouseEnter) === null || _b === void 0 ? void 0 : _b.call(_a, day, modifiers, e);\n\n      if (modifiers.disabled) {\n        return;\n      }\n\n      var _e = DateRangeSelectionStrategy.getNextState(_this.state.value, day, _this.props.allowSingleDayRange, _this.props.boundaryToModify),\n          dateRange = _e.dateRange,\n          boundary = _e.boundary;\n\n      _this.setState({\n        hoverValue: dateRange\n      });\n\n      (_d = (_c = _this.props).onHoverChange) === null || _d === void 0 ? void 0 : _d.call(_c, dateRange, day, boundary);\n    };\n\n    _this.handleDayMouseLeave = function (day, modifiers, e) {\n      var _a, _b, _c, _d;\n\n      (_b = (_a = _this.props.dayPickerProps).onDayMouseLeave) === null || _b === void 0 ? void 0 : _b.call(_a, day, modifiers, e);\n\n      if (modifiers.disabled) {\n        return;\n      }\n\n      _this.setState({\n        hoverValue: undefined\n      });\n\n      (_d = (_c = _this.props).onHoverChange) === null || _d === void 0 ? void 0 : _d.call(_c, undefined, day, undefined);\n    };\n\n    _this.handleDayClick = function (day, modifiers, e) {\n      var _a, _b;\n\n      (_b = (_a = _this.props.dayPickerProps).onDayClick) === null || _b === void 0 ? void 0 : _b.call(_a, day, modifiers, e);\n\n      if (modifiers.disabled) {\n        // rerender base component to get around bug where you can navigate past bounds by clicking days\n        _this.forceUpdate();\n\n        return;\n      }\n\n      var nextValue = DateRangeSelectionStrategy.getNextState(_this.state.value, day, _this.props.allowSingleDayRange, _this.props.boundaryToModify).dateRange; // update the hovered date range after click to show the newly selected\n      // state, at leasts until the mouse moves again\n\n      _this.handleDayMouseEnter(day, modifiers, e);\n\n      _this.handleNextState(nextValue);\n    };\n\n    _this.handleShortcutClick = function (shortcut, selectedShortcutIndex) {\n      var _a = _this.props,\n          onChange = _a.onChange,\n          contiguousCalendarMonths = _a.contiguousCalendarMonths,\n          onShortcutChange = _a.onShortcutChange;\n      var dateRange = shortcut.dateRange,\n          includeTime = shortcut.includeTime;\n\n      if (includeTime) {\n        var newDateRange = [dateRange[0], dateRange[1]];\n        var newTimeRange = [dateRange[0], dateRange[1]];\n        var nextState = getStateChange(_this.state.value, dateRange, _this.state, contiguousCalendarMonths);\n\n        _this.setState(__assign(__assign({}, nextState), {\n          time: newTimeRange\n        }));\n\n        onChange === null || onChange === void 0 ? void 0 : onChange(newDateRange);\n      } else {\n        _this.handleNextState(dateRange);\n      }\n\n      if (_this.props.selectedShortcutIndex === undefined) {\n        _this.setState({\n          selectedShortcutIndex: selectedShortcutIndex\n        });\n      }\n\n      onShortcutChange === null || onShortcutChange === void 0 ? void 0 : onShortcutChange(shortcut, selectedShortcutIndex);\n    };\n\n    _this.handleNextState = function (nextValue) {\n      var _a, _b;\n\n      var value = _this.state.value;\n      nextValue[0] = DateUtils.getDateTime(nextValue[0], _this.state.time[0]);\n      nextValue[1] = DateUtils.getDateTime(nextValue[1], _this.state.time[1]);\n      var nextState = getStateChange(value, nextValue, _this.state, _this.props.contiguousCalendarMonths);\n\n      if (_this.props.value == null) {\n        _this.setState(nextState);\n      }\n\n      (_b = (_a = _this.props).onChange) === null || _b === void 0 ? void 0 : _b.call(_a, nextValue);\n    };\n\n    _this.handleLeftMonthChange = function (newDate) {\n      var _a, _b;\n\n      var leftView = MonthAndYear.fromDate(newDate);\n      (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, leftView.getFullDate());\n\n      _this.updateLeftView(leftView);\n    };\n\n    _this.handleRightMonthChange = function (newDate) {\n      var _a, _b;\n\n      var rightView = MonthAndYear.fromDate(newDate);\n      (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, rightView.getFullDate());\n\n      _this.updateRightView(rightView);\n    };\n\n    _this.handleLeftMonthSelectChange = function (leftMonth) {\n      var _a, _b;\n\n      var leftView = new MonthAndYear(leftMonth, _this.state.leftView.getYear());\n      (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, leftView.getFullDate());\n\n      _this.updateLeftView(leftView);\n    };\n\n    _this.handleRightMonthSelectChange = function (rightMonth) {\n      var _a, _b;\n\n      var rightView = new MonthAndYear(rightMonth, _this.state.rightView.getYear());\n      (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, rightView.getFullDate());\n\n      _this.updateRightView(rightView);\n    };\n    /*\n     * The min / max months are offset by one because we are showing two months.\n     * We do a comparison check to see if\n     *   a) the proposed [Month, Year] change throws the two calendars out of order\n     *   b) the proposed [Month, Year] goes beyond the min / max months\n     * and rectify appropriately.\n     */\n\n\n    _this.handleLeftYearSelectChange = function (leftDisplayYear) {\n      var _a, _b;\n\n      var leftView = new MonthAndYear(_this.state.leftView.getMonth(), leftDisplayYear);\n      (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, leftView.getFullDate());\n      var _c = _this.props,\n          minDate = _c.minDate,\n          maxDate = _c.maxDate;\n      var adjustedMaxDate = DateUtils.getDatePreviousMonth(maxDate);\n      var minMonthAndYear = new MonthAndYear(minDate.getMonth(), minDate.getFullYear());\n      var maxMonthAndYear = new MonthAndYear(adjustedMaxDate.getMonth(), adjustedMaxDate.getFullYear());\n\n      if (leftView.isBefore(minMonthAndYear)) {\n        leftView = minMonthAndYear;\n      } else if (leftView.isAfter(maxMonthAndYear)) {\n        leftView = maxMonthAndYear;\n      }\n\n      var rightView = _this.state.rightView.clone();\n\n      if (!leftView.isBefore(rightView) || _this.props.contiguousCalendarMonths) {\n        rightView = leftView.getNextMonth();\n      }\n\n      _this.setViews(leftView, rightView);\n    };\n\n    _this.handleRightYearSelectChange = function (rightDisplayYear) {\n      var _a, _b;\n\n      var rightView = new MonthAndYear(_this.state.rightView.getMonth(), rightDisplayYear);\n      (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, rightView.getFullDate());\n      var _c = _this.props,\n          minDate = _c.minDate,\n          maxDate = _c.maxDate;\n      var adjustedMinDate = DateUtils.getDateNextMonth(minDate);\n      var minMonthAndYear = MonthAndYear.fromDate(adjustedMinDate);\n      var maxMonthAndYear = MonthAndYear.fromDate(maxDate);\n\n      if (rightView.isBefore(minMonthAndYear)) {\n        rightView = minMonthAndYear;\n      } else if (rightView.isAfter(maxMonthAndYear)) {\n        rightView = maxMonthAndYear;\n      }\n\n      var leftView = _this.state.leftView.clone();\n\n      if (!rightView.isAfter(leftView) || _this.props.contiguousCalendarMonths) {\n        leftView = rightView.getPreviousMonth();\n      }\n\n      _this.setViews(leftView, rightView);\n    };\n\n    var value = getInitialValue(props);\n    var time = value;\n    var initialMonth = getInitialMonth(props, value); // if the initial month is the last month of the picker's\n    // allowable range, the react-day-picker library will show\n    // the max month on the left and the *min* month on the right.\n    // subtracting one avoids that weird, wraparound state (#289).\n\n    var initialMonthEqualsMinMonth = DateUtils.areSameMonth(initialMonth, props.minDate);\n    var initalMonthEqualsMaxMonth = DateUtils.areSameMonth(initialMonth, props.maxDate);\n\n    if (!props.singleMonthOnly && !initialMonthEqualsMinMonth && initalMonthEqualsMaxMonth) {\n      initialMonth.setMonth(initialMonth.getMonth() - 1);\n    } // show the selected end date's encompassing month in the right view if\n    // the calendars don't have to be contiguous.\n    // if left view and right view months are the same, show next month in the right view.\n\n\n    var leftView = MonthAndYear.fromDate(initialMonth);\n    var rightDate = value[1];\n    var rightView = !props.contiguousCalendarMonths && rightDate != null && !DateUtils.areSameMonth(initialMonth, rightDate) ? MonthAndYear.fromDate(rightDate) : leftView.getNextMonth();\n    _this.state = {\n      hoverValue: [null, null],\n      leftView: leftView,\n      rightView: rightView,\n      selectedShortcutIndex: _this.props.selectedShortcutIndex !== undefined ? _this.props.selectedShortcutIndex : -1,\n      time: time,\n      value: value\n    };\n    return _this;\n  }\n\n  DateRangePicker_1 = DateRangePicker;\n\n  DateRangePicker.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        className = _b.className,\n        contiguousCalendarMonths = _b.contiguousCalendarMonths,\n        singleMonthOnly = _b.singleMonthOnly;\n    var isShowingOneMonth = singleMonthOnly || DateUtils.areSameMonth(this.props.minDate, this.props.maxDate);\n    var classes = classNames(DateClasses.DATEPICKER, DateClasses.DATERANGEPICKER, className, (_a = {}, _a[DateClasses.DATERANGEPICKER_CONTIGUOUS] = contiguousCalendarMonths, _a[DateClasses.DATERANGEPICKER_SINGLE_MONTH] = isShowingOneMonth, _a)); // use the left DayPicker when we only need one\n\n    return React.createElement(\"div\", {\n      className: classes\n    }, this.maybeRenderShortcuts(), React.createElement(\"div\", null, this.renderCalendars(isShowingOneMonth), this.maybeRenderTimePickers()));\n  };\n\n  DateRangePicker.prototype.componentDidUpdate = function (prevProps, prevState) {\n    _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n\n    if (!DateUtils.areRangesEqual(prevProps.value, this.props.value) || prevProps.contiguousCalendarMonths !== this.props.contiguousCalendarMonths) {\n      var nextState = getStateChange(prevProps.value, this.props.value, this.state, prevProps.contiguousCalendarMonths);\n      this.setState(nextState);\n    }\n\n    if (this.props.selectedShortcutIndex !== prevProps.selectedShortcutIndex) {\n      this.setState({\n        selectedShortcutIndex: this.props.selectedShortcutIndex\n      });\n    }\n  };\n\n  DateRangePicker.prototype.validateProps = function (props) {\n    var defaultValue = props.defaultValue,\n        initialMonth = props.initialMonth,\n        maxDate = props.maxDate,\n        minDate = props.minDate,\n        boundaryToModify = props.boundaryToModify,\n        value = props.value;\n    var dateRange = [minDate, maxDate];\n\n    if (defaultValue != null && !DateUtils.isDayRangeInRange(defaultValue, dateRange)) {\n      console.error(Errors.DATERANGEPICKER_DEFAULT_VALUE_INVALID);\n    }\n\n    if (initialMonth != null && !DateUtils.isMonthInRange(initialMonth, dateRange)) {\n      console.error(Errors.DATERANGEPICKER_INITIAL_MONTH_INVALID);\n    }\n\n    if (maxDate != null && minDate != null && maxDate < minDate && !DateUtils.areSameDay(maxDate, minDate)) {\n      console.error(Errors.DATERANGEPICKER_MAX_DATE_INVALID);\n    }\n\n    if (value != null && !DateUtils.isDayRangeInRange(value, dateRange)) {\n      console.error(Errors.DATERANGEPICKER_VALUE_INVALID);\n    }\n\n    if (boundaryToModify != null && boundaryToModify !== Boundary.START && boundaryToModify !== Boundary.END) {\n      console.error(Errors.DATERANGEPICKER_PREFERRED_BOUNDARY_TO_MODIFY_INVALID);\n    }\n  };\n\n  DateRangePicker.prototype.maybeRenderShortcuts = function () {\n    var shortcuts = this.props.shortcuts;\n\n    if (shortcuts == null || shortcuts === false) {\n      return null;\n    }\n\n    var selectedShortcutIndex = this.state.selectedShortcutIndex;\n    var _a = this.props,\n        allowSingleDayRange = _a.allowSingleDayRange,\n        maxDate = _a.maxDate,\n        minDate = _a.minDate,\n        timePrecision = _a.timePrecision;\n    return [React.createElement(Shortcuts, __assign({\n      key: \"shortcuts\"\n    }, {\n      allowSingleDayRange: allowSingleDayRange,\n      maxDate: maxDate,\n      minDate: minDate,\n      selectedShortcutIndex: selectedShortcutIndex,\n      shortcuts: shortcuts,\n      timePrecision: timePrecision\n    }, {\n      onShortcutClick: this.handleShortcutClick\n    })), React.createElement(Divider, {\n      key: \"div\"\n    })];\n  };\n\n  DateRangePicker.prototype.maybeRenderTimePickers = function () {\n    var _a = this.props,\n        timePrecision = _a.timePrecision,\n        timePickerProps = _a.timePickerProps;\n\n    if (timePrecision == null && timePickerProps === DateRangePicker_1.defaultProps.timePickerProps) {\n      return null;\n    }\n\n    return React.createElement(\"div\", {\n      className: DateClasses.DATERANGEPICKER_TIMEPICKERS\n    }, React.createElement(TimePicker, __assign({\n      precision: timePrecision\n    }, timePickerProps, {\n      onChange: this.handleTimeChangeLeftCalendar,\n      value: this.state.time[0]\n    })), React.createElement(TimePicker, __assign({\n      precision: timePrecision\n    }, timePickerProps, {\n      onChange: this.handleTimeChangeRightCalendar,\n      value: this.state.time[1]\n    })));\n  };\n\n  DateRangePicker.prototype.renderCalendars = function (isShowingOneMonth) {\n    var _a, _b, _c;\n\n    var _d = this.props,\n        dayPickerProps = _d.dayPickerProps,\n        locale = _d.locale,\n        localeUtils = _d.localeUtils,\n        maxDate = _d.maxDate,\n        minDate = _d.minDate;\n\n    var dayPickerBaseProps = __assign(__assign({\n      locale: locale,\n      localeUtils: localeUtils,\n      modifiers: this.getDateRangePickerModifiers(),\n      showOutsideDays: true\n    }, dayPickerProps), {\n      disabledDays: this.getDisabledDaysModifier(),\n      onDayClick: this.handleDayClick,\n      onDayMouseEnter: this.handleDayMouseEnter,\n      onDayMouseLeave: this.handleDayMouseLeave,\n      selectedDays: this.state.value\n    });\n\n    if (isShowingOneMonth) {\n      return React.createElement(DayPicker, __assign({}, dayPickerBaseProps, {\n        captionElement: this.renderSingleCaption,\n        navbarElement: this.renderSingleNavbar,\n        fromMonth: minDate,\n        month: this.state.leftView.getFullDate(),\n        numberOfMonths: 1,\n        onMonthChange: this.handleLeftMonthChange,\n        toMonth: maxDate,\n        renderDay: (_a = dayPickerProps === null || dayPickerProps === void 0 ? void 0 : dayPickerProps.renderDay) !== null && _a !== void 0 ? _a : this.renderDay\n      }));\n    } else {\n      return [React.createElement(DayPicker, __assign({\n        key: \"left\"\n      }, dayPickerBaseProps, {\n        canChangeMonth: true,\n        captionElement: this.renderLeftCaption,\n        navbarElement: this.renderLeftNavbar,\n        fromMonth: minDate,\n        month: this.state.leftView.getFullDate(),\n        numberOfMonths: 1,\n        onMonthChange: this.handleLeftMonthChange,\n        toMonth: DateUtils.getDatePreviousMonth(maxDate),\n        renderDay: (_b = dayPickerProps === null || dayPickerProps === void 0 ? void 0 : dayPickerProps.renderDay) !== null && _b !== void 0 ? _b : this.renderDay\n      })), React.createElement(DayPicker, __assign({\n        key: \"right\"\n      }, dayPickerBaseProps, {\n        canChangeMonth: true,\n        captionElement: this.renderRightCaption,\n        navbarElement: this.renderRightNavbar,\n        fromMonth: DateUtils.getDateNextMonth(minDate),\n        month: this.state.rightView.getFullDate(),\n        numberOfMonths: 1,\n        onMonthChange: this.handleRightMonthChange,\n        toMonth: maxDate,\n        renderDay: (_c = dayPickerProps === null || dayPickerProps === void 0 ? void 0 : dayPickerProps.renderDay) !== null && _c !== void 0 ? _c : this.renderDay\n      }))];\n    }\n  };\n\n  DateRangePicker.prototype.updateLeftView = function (leftView) {\n    var rightView = this.state.rightView.clone();\n\n    if (!leftView.isBefore(rightView) || this.props.contiguousCalendarMonths) {\n      rightView = leftView.getNextMonth();\n    }\n\n    this.setViews(leftView, rightView);\n  };\n\n  DateRangePicker.prototype.updateRightView = function (rightView) {\n    var leftView = this.state.leftView.clone();\n\n    if (!rightView.isAfter(leftView) || this.props.contiguousCalendarMonths) {\n      leftView = rightView.getPreviousMonth();\n    }\n\n    this.setViews(leftView, rightView);\n  };\n\n  DateRangePicker.prototype.setViews = function (leftView, rightView) {\n    this.setState({\n      leftView: leftView,\n      rightView: rightView\n    });\n  };\n\n  var DateRangePicker_1;\n  DateRangePicker.defaultProps = {\n    allowSingleDayRange: false,\n    contiguousCalendarMonths: true,\n    dayPickerProps: {},\n    maxDate: getDefaultMaxDate(),\n    minDate: getDefaultMinDate(),\n    reverseMonthAndYearMenus: false,\n    shortcuts: true,\n    singleMonthOnly: false,\n    timePickerProps: {}\n  };\n  DateRangePicker.displayName = DISPLAYNAME_PREFIX + \".DateRangePicker\";\n  DateRangePicker = DateRangePicker_1 = __decorate([polyfill], DateRangePicker);\n  return DateRangePicker;\n}(AbstractPureComponent2);\n\nexport { DateRangePicker };\n\nfunction getStateChange(value, nextValue, state, contiguousCalendarMonths) {\n  if (value != null && nextValue == null) {\n    return {\n      value: [null, null]\n    };\n  } else if (nextValue != null) {\n    var leftView = state.leftView.clone();\n    var rightView = state.rightView.clone();\n    var nextValueStartView = MonthAndYear.fromDate(nextValue[0]);\n    var nextValueEndView = MonthAndYear.fromDate(nextValue[1]); // Only end date selected.\n    // If the newly selected end date isn't in either of the displayed months, then\n    //   - set the right DayPicker to the month of the selected end date\n    //   - ensure the left DayPicker is before the right, changing if needed\n\n    if (nextValueStartView == null && nextValueEndView != null) {\n      if (!nextValueEndView.isSame(leftView) && !nextValueEndView.isSame(rightView)) {\n        rightView = nextValueEndView;\n\n        if (!leftView.isBefore(rightView)) {\n          leftView = rightView.getPreviousMonth();\n        }\n      }\n    } else if (nextValueStartView != null && nextValueEndView == null) {\n      // Only start date selected.\n      // If the newly selected start date isn't in either of the displayed months, then\n      //   - set the left DayPicker to the month of the selected start date\n      //   - ensure the right DayPicker is before the left, changing if needed\n      if (!nextValueStartView.isSame(leftView) && !nextValueStartView.isSame(rightView)) {\n        leftView = nextValueStartView;\n\n        if (!rightView.isAfter(leftView)) {\n          rightView = leftView.getNextMonth();\n        }\n      }\n    } else if (nextValueStartView != null && nextValueEndView != null) {\n      // Both start and end date months are identical\n      // If the selected month isn't in either of the displayed months, then\n      //   - set the left DayPicker to be the selected month\n      //   - set the right DayPicker to +1\n      if (nextValueStartView.isSame(nextValueEndView)) {\n        if (leftView.isSame(nextValueStartView) || rightView.isSame(nextValueStartView)) {// do nothing\n        } else {\n          leftView = nextValueStartView;\n          rightView = nextValueStartView.getNextMonth();\n        }\n      } else {\n        // Different start and end date months, adjust display months.\n        if (!leftView.isSame(nextValueStartView)) {\n          leftView = nextValueStartView;\n          rightView = nextValueStartView.getNextMonth();\n        }\n\n        if (contiguousCalendarMonths === false && !rightView.isSame(nextValueEndView)) {\n          rightView = nextValueEndView;\n        }\n      }\n    }\n\n    return {\n      leftView: leftView,\n      rightView: rightView,\n      value: nextValue\n    };\n  } else if (contiguousCalendarMonths === true) {\n    // contiguousCalendarMonths is toggled on.\n    // If the previous leftView and rightView are not contiguous, then set the right DayPicker to left + 1\n    if (!state.leftView.getNextMonth().isSameMonth(state.rightView)) {\n      var nextRightView = state.leftView.getNextMonth();\n      return {\n        rightView: nextRightView\n      };\n    }\n  }\n\n  return {};\n}\n\nfunction getInitialValue(props) {\n  if (props.value != null) {\n    return props.value;\n  }\n\n  if (props.defaultValue != null) {\n    return props.defaultValue;\n  }\n\n  return [null, null];\n}\n\nfunction getInitialMonth(props, value) {\n  var today = new Date(); // != because we must have a real `Date` to begin the calendar on.\n\n  if (props.initialMonth != null) {\n    return props.initialMonth;\n  } else if (value[0] != null) {\n    return DateUtils.clone(value[0]);\n  } else if (value[1] != null) {\n    var month = DateUtils.clone(value[1]);\n\n    if (!DateUtils.areSameMonth(month, props.minDate)) {\n      month.setMonth(month.getMonth() - 1);\n    }\n\n    return month;\n  } else if (DateUtils.isDayInRange(today, [props.minDate, props.maxDate])) {\n    return today;\n  } else {\n    return DateUtils.getDateBetween([props.minDate, props.maxDate]);\n  }\n}","map":{"version":3,"sources":["../../src/dateRangePicker.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __decorate, __extends, __spreadArrays } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport DayPicker from \"react-day-picker\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Boundary, DISPLAYNAME_PREFIX, Divider } from \"@blueprintjs/core\";\nimport * as DateClasses from \"./common/classes\";\nimport * as DateUtils from \"./common/dateUtils\";\nimport * as Errors from \"./common/errors\";\nimport { MonthAndYear } from \"./common/monthAndYear\";\nimport { DatePickerCaption } from \"./datePickerCaption\";\nimport { combineModifiers, getDefaultMaxDate, getDefaultMinDate, HOVERED_RANGE_MODIFIER, SELECTED_RANGE_MODIFIER, } from \"./datePickerCore\";\nimport { DatePickerNavbar } from \"./datePickerNavbar\";\nimport { DateRangeSelectionStrategy } from \"./dateRangeSelectionStrategy\";\nimport { Shortcuts } from \"./shortcuts\";\nimport { TimePicker } from \"./timePicker\";\nvar DateRangePicker = /** @class */ (function (_super) {\n    __extends(DateRangePicker, _super);\n    function DateRangePicker(props, context) {\n        var _a;\n        var _this = _super.call(this, props, context) || this;\n        // these will get merged with the user's own\n        _this.modifiers = (_a = {},\n            _a[SELECTED_RANGE_MODIFIER] = function (day) {\n                var value = _this.state.value;\n                return value[0] != null && value[1] != null && DateUtils.isDayInRange(day, value, true);\n            },\n            _a[SELECTED_RANGE_MODIFIER + \"-start\"] = function (day) { return DateUtils.areSameDay(_this.state.value[0], day); },\n            _a[SELECTED_RANGE_MODIFIER + \"-end\"] = function (day) { return DateUtils.areSameDay(_this.state.value[1], day); },\n            _a[HOVERED_RANGE_MODIFIER] = function (day) {\n                var _a = _this.state, hoverValue = _a.hoverValue, _b = _a.value, selectedStart = _b[0], selectedEnd = _b[1];\n                if (selectedStart == null && selectedEnd == null) {\n                    return false;\n                }\n                if (hoverValue == null || hoverValue[0] == null || hoverValue[1] == null) {\n                    return false;\n                }\n                return DateUtils.isDayInRange(day, hoverValue, true);\n            },\n            _a[HOVERED_RANGE_MODIFIER + \"-start\"] = function (day) {\n                var hoverValue = _this.state.hoverValue;\n                if (hoverValue == null || hoverValue[0] == null) {\n                    return false;\n                }\n                return DateUtils.areSameDay(hoverValue[0], day);\n            },\n            _a[HOVERED_RANGE_MODIFIER + \"-end\"] = function (day) {\n                var hoverValue = _this.state.hoverValue;\n                if (hoverValue == null || hoverValue[1] == null) {\n                    return false;\n                }\n                return DateUtils.areSameDay(hoverValue[1], day);\n            },\n            _a);\n        _this.shouldHighlightCurrentDay = function (date) {\n            var highlightCurrentDay = _this.props.highlightCurrentDay;\n            return highlightCurrentDay && DateUtils.isToday(date);\n        };\n        _this.getDateRangePickerModifiers = function () {\n            var modifiers = _this.props.modifiers;\n            return combineModifiers(_this.modifiers, __assign({ isToday: _this.shouldHighlightCurrentDay }, modifiers));\n        };\n        _this.renderDay = function (day) {\n            var date = day.getDate();\n            return React.createElement(\"div\", { className: DateClasses.DATEPICKER_DAY_WRAPPER }, date);\n        };\n        _this.disabledDays = function (day) { return !DateUtils.isDayInRange(day, [_this.props.minDate, _this.props.maxDate]); };\n        _this.getDisabledDaysModifier = function () {\n            var disabledDays = _this.props.dayPickerProps.disabledDays;\n            return disabledDays instanceof Array ? __spreadArrays([_this.disabledDays], disabledDays) : [_this.disabledDays, disabledDays];\n        };\n        _this.handleTimeChange = function (newTime, dateIndex) {\n            var _a, _b, _c, _d;\n            (_b = (_a = _this.props.timePickerProps) === null || _a === void 0 ? void 0 : _a.onChange) === null || _b === void 0 ? void 0 : _b.call(_a, newTime);\n            var _e = _this.state, value = _e.value, time = _e.time;\n            var newValue = DateUtils.getDateTime(value[dateIndex] != null ? DateUtils.clone(value[dateIndex]) : new Date(), newTime);\n            var newDateRange = [value[0], value[1]];\n            newDateRange[dateIndex] = newValue;\n            var newTimeRange = [time[0], time[1]];\n            newTimeRange[dateIndex] = newTime;\n            (_d = (_c = _this.props).onChange) === null || _d === void 0 ? void 0 : _d.call(_c, newDateRange);\n            _this.setState({ value: newDateRange, time: newTimeRange });\n        };\n        _this.handleTimeChangeLeftCalendar = function (time) {\n            _this.handleTimeChange(time, 0);\n        };\n        _this.handleTimeChangeRightCalendar = function (time) {\n            _this.handleTimeChange(time, 1);\n        };\n        _this.renderSingleNavbar = function (navbarProps) { return (React.createElement(DatePickerNavbar, __assign({}, navbarProps, { maxDate: _this.props.maxDate, minDate: _this.props.minDate }))); };\n        _this.renderLeftNavbar = function (navbarProps) { return (React.createElement(DatePickerNavbar, __assign({}, navbarProps, { hideRightNavButton: _this.props.contiguousCalendarMonths, maxDate: _this.props.maxDate, minDate: _this.props.minDate }))); };\n        _this.renderRightNavbar = function (navbarProps) { return (React.createElement(DatePickerNavbar, __assign({}, navbarProps, { hideLeftNavButton: _this.props.contiguousCalendarMonths, maxDate: _this.props.maxDate, minDate: _this.props.minDate }))); };\n        _this.renderSingleCaption = function (captionProps) { return (React.createElement(DatePickerCaption, __assign({}, captionProps, { maxDate: _this.props.maxDate, minDate: _this.props.minDate, onMonthChange: _this.handleLeftMonthSelectChange, onYearChange: _this.handleLeftYearSelectChange, reverseMonthAndYearMenus: _this.props.reverseMonthAndYearMenus }))); };\n        _this.renderLeftCaption = function (captionProps) { return (React.createElement(DatePickerCaption, __assign({}, captionProps, { maxDate: DateUtils.getDatePreviousMonth(_this.props.maxDate), minDate: _this.props.minDate, onMonthChange: _this.handleLeftMonthSelectChange, onYearChange: _this.handleLeftYearSelectChange, reverseMonthAndYearMenus: _this.props.reverseMonthAndYearMenus }))); };\n        _this.renderRightCaption = function (captionProps) { return (React.createElement(DatePickerCaption, __assign({}, captionProps, { maxDate: _this.props.maxDate, minDate: DateUtils.getDateNextMonth(_this.props.minDate), onMonthChange: _this.handleRightMonthSelectChange, onYearChange: _this.handleRightYearSelectChange, reverseMonthAndYearMenus: _this.props.reverseMonthAndYearMenus }))); };\n        _this.handleDayMouseEnter = function (day, modifiers, e) {\n            var _a, _b, _c, _d;\n            (_b = (_a = _this.props.dayPickerProps).onDayMouseEnter) === null || _b === void 0 ? void 0 : _b.call(_a, day, modifiers, e);\n            if (modifiers.disabled) {\n                return;\n            }\n            var _e = DateRangeSelectionStrategy.getNextState(_this.state.value, day, _this.props.allowSingleDayRange, _this.props.boundaryToModify), dateRange = _e.dateRange, boundary = _e.boundary;\n            _this.setState({ hoverValue: dateRange });\n            (_d = (_c = _this.props).onHoverChange) === null || _d === void 0 ? void 0 : _d.call(_c, dateRange, day, boundary);\n        };\n        _this.handleDayMouseLeave = function (day, modifiers, e) {\n            var _a, _b, _c, _d;\n            (_b = (_a = _this.props.dayPickerProps).onDayMouseLeave) === null || _b === void 0 ? void 0 : _b.call(_a, day, modifiers, e);\n            if (modifiers.disabled) {\n                return;\n            }\n            _this.setState({ hoverValue: undefined });\n            (_d = (_c = _this.props).onHoverChange) === null || _d === void 0 ? void 0 : _d.call(_c, undefined, day, undefined);\n        };\n        _this.handleDayClick = function (day, modifiers, e) {\n            var _a, _b;\n            (_b = (_a = _this.props.dayPickerProps).onDayClick) === null || _b === void 0 ? void 0 : _b.call(_a, day, modifiers, e);\n            if (modifiers.disabled) {\n                // rerender base component to get around bug where you can navigate past bounds by clicking days\n                _this.forceUpdate();\n                return;\n            }\n            var nextValue = DateRangeSelectionStrategy.getNextState(_this.state.value, day, _this.props.allowSingleDayRange, _this.props.boundaryToModify).dateRange;\n            // update the hovered date range after click to show the newly selected\n            // state, at leasts until the mouse moves again\n            _this.handleDayMouseEnter(day, modifiers, e);\n            _this.handleNextState(nextValue);\n        };\n        _this.handleShortcutClick = function (shortcut, selectedShortcutIndex) {\n            var _a = _this.props, onChange = _a.onChange, contiguousCalendarMonths = _a.contiguousCalendarMonths, onShortcutChange = _a.onShortcutChange;\n            var dateRange = shortcut.dateRange, includeTime = shortcut.includeTime;\n            if (includeTime) {\n                var newDateRange = [dateRange[0], dateRange[1]];\n                var newTimeRange = [dateRange[0], dateRange[1]];\n                var nextState = getStateChange(_this.state.value, dateRange, _this.state, contiguousCalendarMonths);\n                _this.setState(__assign(__assign({}, nextState), { time: newTimeRange }));\n                onChange === null || onChange === void 0 ? void 0 : onChange(newDateRange);\n            }\n            else {\n                _this.handleNextState(dateRange);\n            }\n            if (_this.props.selectedShortcutIndex === undefined) {\n                _this.setState({ selectedShortcutIndex: selectedShortcutIndex });\n            }\n            onShortcutChange === null || onShortcutChange === void 0 ? void 0 : onShortcutChange(shortcut, selectedShortcutIndex);\n        };\n        _this.handleNextState = function (nextValue) {\n            var _a, _b;\n            var value = _this.state.value;\n            nextValue[0] = DateUtils.getDateTime(nextValue[0], _this.state.time[0]);\n            nextValue[1] = DateUtils.getDateTime(nextValue[1], _this.state.time[1]);\n            var nextState = getStateChange(value, nextValue, _this.state, _this.props.contiguousCalendarMonths);\n            if (_this.props.value == null) {\n                _this.setState(nextState);\n            }\n            (_b = (_a = _this.props).onChange) === null || _b === void 0 ? void 0 : _b.call(_a, nextValue);\n        };\n        _this.handleLeftMonthChange = function (newDate) {\n            var _a, _b;\n            var leftView = MonthAndYear.fromDate(newDate);\n            (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, leftView.getFullDate());\n            _this.updateLeftView(leftView);\n        };\n        _this.handleRightMonthChange = function (newDate) {\n            var _a, _b;\n            var rightView = MonthAndYear.fromDate(newDate);\n            (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, rightView.getFullDate());\n            _this.updateRightView(rightView);\n        };\n        _this.handleLeftMonthSelectChange = function (leftMonth) {\n            var _a, _b;\n            var leftView = new MonthAndYear(leftMonth, _this.state.leftView.getYear());\n            (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, leftView.getFullDate());\n            _this.updateLeftView(leftView);\n        };\n        _this.handleRightMonthSelectChange = function (rightMonth) {\n            var _a, _b;\n            var rightView = new MonthAndYear(rightMonth, _this.state.rightView.getYear());\n            (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, rightView.getFullDate());\n            _this.updateRightView(rightView);\n        };\n        /*\n         * The min / max months are offset by one because we are showing two months.\n         * We do a comparison check to see if\n         *   a) the proposed [Month, Year] change throws the two calendars out of order\n         *   b) the proposed [Month, Year] goes beyond the min / max months\n         * and rectify appropriately.\n         */\n        _this.handleLeftYearSelectChange = function (leftDisplayYear) {\n            var _a, _b;\n            var leftView = new MonthAndYear(_this.state.leftView.getMonth(), leftDisplayYear);\n            (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, leftView.getFullDate());\n            var _c = _this.props, minDate = _c.minDate, maxDate = _c.maxDate;\n            var adjustedMaxDate = DateUtils.getDatePreviousMonth(maxDate);\n            var minMonthAndYear = new MonthAndYear(minDate.getMonth(), minDate.getFullYear());\n            var maxMonthAndYear = new MonthAndYear(adjustedMaxDate.getMonth(), adjustedMaxDate.getFullYear());\n            if (leftView.isBefore(minMonthAndYear)) {\n                leftView = minMonthAndYear;\n            }\n            else if (leftView.isAfter(maxMonthAndYear)) {\n                leftView = maxMonthAndYear;\n            }\n            var rightView = _this.state.rightView.clone();\n            if (!leftView.isBefore(rightView) || _this.props.contiguousCalendarMonths) {\n                rightView = leftView.getNextMonth();\n            }\n            _this.setViews(leftView, rightView);\n        };\n        _this.handleRightYearSelectChange = function (rightDisplayYear) {\n            var _a, _b;\n            var rightView = new MonthAndYear(_this.state.rightView.getMonth(), rightDisplayYear);\n            (_b = (_a = _this.props.dayPickerProps).onMonthChange) === null || _b === void 0 ? void 0 : _b.call(_a, rightView.getFullDate());\n            var _c = _this.props, minDate = _c.minDate, maxDate = _c.maxDate;\n            var adjustedMinDate = DateUtils.getDateNextMonth(minDate);\n            var minMonthAndYear = MonthAndYear.fromDate(adjustedMinDate);\n            var maxMonthAndYear = MonthAndYear.fromDate(maxDate);\n            if (rightView.isBefore(minMonthAndYear)) {\n                rightView = minMonthAndYear;\n            }\n            else if (rightView.isAfter(maxMonthAndYear)) {\n                rightView = maxMonthAndYear;\n            }\n            var leftView = _this.state.leftView.clone();\n            if (!rightView.isAfter(leftView) || _this.props.contiguousCalendarMonths) {\n                leftView = rightView.getPreviousMonth();\n            }\n            _this.setViews(leftView, rightView);\n        };\n        var value = getInitialValue(props);\n        var time = value;\n        var initialMonth = getInitialMonth(props, value);\n        // if the initial month is the last month of the picker's\n        // allowable range, the react-day-picker library will show\n        // the max month on the left and the *min* month on the right.\n        // subtracting one avoids that weird, wraparound state (#289).\n        var initialMonthEqualsMinMonth = DateUtils.areSameMonth(initialMonth, props.minDate);\n        var initalMonthEqualsMaxMonth = DateUtils.areSameMonth(initialMonth, props.maxDate);\n        if (!props.singleMonthOnly && !initialMonthEqualsMinMonth && initalMonthEqualsMaxMonth) {\n            initialMonth.setMonth(initialMonth.getMonth() - 1);\n        }\n        // show the selected end date's encompassing month in the right view if\n        // the calendars don't have to be contiguous.\n        // if left view and right view months are the same, show next month in the right view.\n        var leftView = MonthAndYear.fromDate(initialMonth);\n        var rightDate = value[1];\n        var rightView = !props.contiguousCalendarMonths && rightDate != null && !DateUtils.areSameMonth(initialMonth, rightDate)\n            ? MonthAndYear.fromDate(rightDate)\n            : leftView.getNextMonth();\n        _this.state = {\n            hoverValue: [null, null],\n            leftView: leftView,\n            rightView: rightView,\n            selectedShortcutIndex: _this.props.selectedShortcutIndex !== undefined ? _this.props.selectedShortcutIndex : -1,\n            time: time,\n            value: value,\n        };\n        return _this;\n    }\n    DateRangePicker_1 = DateRangePicker;\n    DateRangePicker.prototype.render = function () {\n        var _a;\n        var _b = this.props, className = _b.className, contiguousCalendarMonths = _b.contiguousCalendarMonths, singleMonthOnly = _b.singleMonthOnly;\n        var isShowingOneMonth = singleMonthOnly || DateUtils.areSameMonth(this.props.minDate, this.props.maxDate);\n        var classes = classNames(DateClasses.DATEPICKER, DateClasses.DATERANGEPICKER, className, (_a = {},\n            _a[DateClasses.DATERANGEPICKER_CONTIGUOUS] = contiguousCalendarMonths,\n            _a[DateClasses.DATERANGEPICKER_SINGLE_MONTH] = isShowingOneMonth,\n            _a));\n        // use the left DayPicker when we only need one\n        return (React.createElement(\"div\", { className: classes },\n            this.maybeRenderShortcuts(),\n            React.createElement(\"div\", null,\n                this.renderCalendars(isShowingOneMonth),\n                this.maybeRenderTimePickers())));\n    };\n    DateRangePicker.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        if (!DateUtils.areRangesEqual(prevProps.value, this.props.value) ||\n            prevProps.contiguousCalendarMonths !== this.props.contiguousCalendarMonths) {\n            var nextState = getStateChange(prevProps.value, this.props.value, this.state, prevProps.contiguousCalendarMonths);\n            this.setState(nextState);\n        }\n        if (this.props.selectedShortcutIndex !== prevProps.selectedShortcutIndex) {\n            this.setState({ selectedShortcutIndex: this.props.selectedShortcutIndex });\n        }\n    };\n    DateRangePicker.prototype.validateProps = function (props) {\n        var defaultValue = props.defaultValue, initialMonth = props.initialMonth, maxDate = props.maxDate, minDate = props.minDate, boundaryToModify = props.boundaryToModify, value = props.value;\n        var dateRange = [minDate, maxDate];\n        if (defaultValue != null && !DateUtils.isDayRangeInRange(defaultValue, dateRange)) {\n            console.error(Errors.DATERANGEPICKER_DEFAULT_VALUE_INVALID);\n        }\n        if (initialMonth != null && !DateUtils.isMonthInRange(initialMonth, dateRange)) {\n            console.error(Errors.DATERANGEPICKER_INITIAL_MONTH_INVALID);\n        }\n        if (maxDate != null && minDate != null && maxDate < minDate && !DateUtils.areSameDay(maxDate, minDate)) {\n            console.error(Errors.DATERANGEPICKER_MAX_DATE_INVALID);\n        }\n        if (value != null && !DateUtils.isDayRangeInRange(value, dateRange)) {\n            console.error(Errors.DATERANGEPICKER_VALUE_INVALID);\n        }\n        if (boundaryToModify != null && boundaryToModify !== Boundary.START && boundaryToModify !== Boundary.END) {\n            console.error(Errors.DATERANGEPICKER_PREFERRED_BOUNDARY_TO_MODIFY_INVALID);\n        }\n    };\n    DateRangePicker.prototype.maybeRenderShortcuts = function () {\n        var shortcuts = this.props.shortcuts;\n        if (shortcuts == null || shortcuts === false) {\n            return null;\n        }\n        var selectedShortcutIndex = this.state.selectedShortcutIndex;\n        var _a = this.props, allowSingleDayRange = _a.allowSingleDayRange, maxDate = _a.maxDate, minDate = _a.minDate, timePrecision = _a.timePrecision;\n        return [\n            React.createElement(Shortcuts, __assign({ key: \"shortcuts\" }, {\n                allowSingleDayRange: allowSingleDayRange,\n                maxDate: maxDate,\n                minDate: minDate,\n                selectedShortcutIndex: selectedShortcutIndex,\n                shortcuts: shortcuts,\n                timePrecision: timePrecision,\n            }, { onShortcutClick: this.handleShortcutClick })),\n            React.createElement(Divider, { key: \"div\" }),\n        ];\n    };\n    DateRangePicker.prototype.maybeRenderTimePickers = function () {\n        var _a = this.props, timePrecision = _a.timePrecision, timePickerProps = _a.timePickerProps;\n        if (timePrecision == null && timePickerProps === DateRangePicker_1.defaultProps.timePickerProps) {\n            return null;\n        }\n        return (React.createElement(\"div\", { className: DateClasses.DATERANGEPICKER_TIMEPICKERS },\n            React.createElement(TimePicker, __assign({ precision: timePrecision }, timePickerProps, { onChange: this.handleTimeChangeLeftCalendar, value: this.state.time[0] })),\n            React.createElement(TimePicker, __assign({ precision: timePrecision }, timePickerProps, { onChange: this.handleTimeChangeRightCalendar, value: this.state.time[1] }))));\n    };\n    DateRangePicker.prototype.renderCalendars = function (isShowingOneMonth) {\n        var _a, _b, _c;\n        var _d = this.props, dayPickerProps = _d.dayPickerProps, locale = _d.locale, localeUtils = _d.localeUtils, maxDate = _d.maxDate, minDate = _d.minDate;\n        var dayPickerBaseProps = __assign(__assign({ locale: locale,\n            localeUtils: localeUtils, modifiers: this.getDateRangePickerModifiers(), showOutsideDays: true }, dayPickerProps), { disabledDays: this.getDisabledDaysModifier(), onDayClick: this.handleDayClick, onDayMouseEnter: this.handleDayMouseEnter, onDayMouseLeave: this.handleDayMouseLeave, selectedDays: this.state.value });\n        if (isShowingOneMonth) {\n            return (React.createElement(DayPicker, __assign({}, dayPickerBaseProps, { captionElement: this.renderSingleCaption, navbarElement: this.renderSingleNavbar, fromMonth: minDate, month: this.state.leftView.getFullDate(), numberOfMonths: 1, onMonthChange: this.handleLeftMonthChange, toMonth: maxDate, renderDay: (_a = dayPickerProps === null || dayPickerProps === void 0 ? void 0 : dayPickerProps.renderDay) !== null && _a !== void 0 ? _a : this.renderDay })));\n        }\n        else {\n            return [\n                React.createElement(DayPicker, __assign({ key: \"left\" }, dayPickerBaseProps, { canChangeMonth: true, captionElement: this.renderLeftCaption, navbarElement: this.renderLeftNavbar, fromMonth: minDate, month: this.state.leftView.getFullDate(), numberOfMonths: 1, onMonthChange: this.handleLeftMonthChange, toMonth: DateUtils.getDatePreviousMonth(maxDate), renderDay: (_b = dayPickerProps === null || dayPickerProps === void 0 ? void 0 : dayPickerProps.renderDay) !== null && _b !== void 0 ? _b : this.renderDay })),\n                React.createElement(DayPicker, __assign({ key: \"right\" }, dayPickerBaseProps, { canChangeMonth: true, captionElement: this.renderRightCaption, navbarElement: this.renderRightNavbar, fromMonth: DateUtils.getDateNextMonth(minDate), month: this.state.rightView.getFullDate(), numberOfMonths: 1, onMonthChange: this.handleRightMonthChange, toMonth: maxDate, renderDay: (_c = dayPickerProps === null || dayPickerProps === void 0 ? void 0 : dayPickerProps.renderDay) !== null && _c !== void 0 ? _c : this.renderDay })),\n            ];\n        }\n    };\n    DateRangePicker.prototype.updateLeftView = function (leftView) {\n        var rightView = this.state.rightView.clone();\n        if (!leftView.isBefore(rightView) || this.props.contiguousCalendarMonths) {\n            rightView = leftView.getNextMonth();\n        }\n        this.setViews(leftView, rightView);\n    };\n    DateRangePicker.prototype.updateRightView = function (rightView) {\n        var leftView = this.state.leftView.clone();\n        if (!rightView.isAfter(leftView) || this.props.contiguousCalendarMonths) {\n            leftView = rightView.getPreviousMonth();\n        }\n        this.setViews(leftView, rightView);\n    };\n    DateRangePicker.prototype.setViews = function (leftView, rightView) {\n        this.setState({ leftView: leftView, rightView: rightView });\n    };\n    var DateRangePicker_1;\n    DateRangePicker.defaultProps = {\n        allowSingleDayRange: false,\n        contiguousCalendarMonths: true,\n        dayPickerProps: {},\n        maxDate: getDefaultMaxDate(),\n        minDate: getDefaultMinDate(),\n        reverseMonthAndYearMenus: false,\n        shortcuts: true,\n        singleMonthOnly: false,\n        timePickerProps: {},\n    };\n    DateRangePicker.displayName = DISPLAYNAME_PREFIX + \".DateRangePicker\";\n    DateRangePicker = DateRangePicker_1 = __decorate([\n        polyfill\n    ], DateRangePicker);\n    return DateRangePicker;\n}(AbstractPureComponent2));\nexport { DateRangePicker };\nfunction getStateChange(value, nextValue, state, contiguousCalendarMonths) {\n    if (value != null && nextValue == null) {\n        return { value: [null, null] };\n    }\n    else if (nextValue != null) {\n        var leftView = state.leftView.clone();\n        var rightView = state.rightView.clone();\n        var nextValueStartView = MonthAndYear.fromDate(nextValue[0]);\n        var nextValueEndView = MonthAndYear.fromDate(nextValue[1]);\n        // Only end date selected.\n        // If the newly selected end date isn't in either of the displayed months, then\n        //   - set the right DayPicker to the month of the selected end date\n        //   - ensure the left DayPicker is before the right, changing if needed\n        if (nextValueStartView == null && nextValueEndView != null) {\n            if (!nextValueEndView.isSame(leftView) && !nextValueEndView.isSame(rightView)) {\n                rightView = nextValueEndView;\n                if (!leftView.isBefore(rightView)) {\n                    leftView = rightView.getPreviousMonth();\n                }\n            }\n        }\n        else if (nextValueStartView != null && nextValueEndView == null) {\n            // Only start date selected.\n            // If the newly selected start date isn't in either of the displayed months, then\n            //   - set the left DayPicker to the month of the selected start date\n            //   - ensure the right DayPicker is before the left, changing if needed\n            if (!nextValueStartView.isSame(leftView) && !nextValueStartView.isSame(rightView)) {\n                leftView = nextValueStartView;\n                if (!rightView.isAfter(leftView)) {\n                    rightView = leftView.getNextMonth();\n                }\n            }\n        }\n        else if (nextValueStartView != null && nextValueEndView != null) {\n            // Both start and end date months are identical\n            // If the selected month isn't in either of the displayed months, then\n            //   - set the left DayPicker to be the selected month\n            //   - set the right DayPicker to +1\n            if (nextValueStartView.isSame(nextValueEndView)) {\n                if (leftView.isSame(nextValueStartView) || rightView.isSame(nextValueStartView)) {\n                    // do nothing\n                }\n                else {\n                    leftView = nextValueStartView;\n                    rightView = nextValueStartView.getNextMonth();\n                }\n            }\n            else {\n                // Different start and end date months, adjust display months.\n                if (!leftView.isSame(nextValueStartView)) {\n                    leftView = nextValueStartView;\n                    rightView = nextValueStartView.getNextMonth();\n                }\n                if (contiguousCalendarMonths === false && !rightView.isSame(nextValueEndView)) {\n                    rightView = nextValueEndView;\n                }\n            }\n        }\n        return {\n            leftView: leftView,\n            rightView: rightView,\n            value: nextValue,\n        };\n    }\n    else if (contiguousCalendarMonths === true) {\n        // contiguousCalendarMonths is toggled on.\n        // If the previous leftView and rightView are not contiguous, then set the right DayPicker to left + 1\n        if (!state.leftView.getNextMonth().isSameMonth(state.rightView)) {\n            var nextRightView = state.leftView.getNextMonth();\n            return { rightView: nextRightView };\n        }\n    }\n    return {};\n}\nfunction getInitialValue(props) {\n    if (props.value != null) {\n        return props.value;\n    }\n    if (props.defaultValue != null) {\n        return props.defaultValue;\n    }\n    return [null, null];\n}\nfunction getInitialMonth(props, value) {\n    var today = new Date();\n    // != because we must have a real `Date` to begin the calendar on.\n    if (props.initialMonth != null) {\n        return props.initialMonth;\n    }\n    else if (value[0] != null) {\n        return DateUtils.clone(value[0]);\n    }\n    else if (value[1] != null) {\n        var month = DateUtils.clone(value[1]);\n        if (!DateUtils.areSameMonth(month, props.minDate)) {\n            month.setMonth(month.getMonth() - 1);\n        }\n        return month;\n    }\n    else if (DateUtils.isDayInRange(today, [props.minDate, props.maxDate])) {\n        return today;\n    }\n    else {\n        return DateUtils.getDateBetween([props.minDate, props.maxDate]);\n    }\n}\n//# sourceMappingURL=dateRangePicker.js.map"]},"metadata":{},"sourceType":"module"}