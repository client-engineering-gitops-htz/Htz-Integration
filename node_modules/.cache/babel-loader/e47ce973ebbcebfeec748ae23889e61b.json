{"ast":null,"code":"/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __extends, __rest } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { AbstractPureComponent2, Button, DISPLAYNAME_PREFIX, InputGroup, Keys, Popover, Position, refHandler, setRef } from \"@blueprintjs/core\";\nimport { Classes } from \"../../common\";\nimport { QueryList } from \"../query-list/queryList\";\n\nvar Select =\n/** @class */\nfunction (_super) {\n  __extends(Select, _super);\n\n  function Select() {\n    var _a;\n\n    var _this = _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isOpen: false\n    };\n    _this.TypedQueryList = QueryList.ofType();\n    _this.inputElement = null;\n    _this.queryList = null;\n    _this.handleInputRef = refHandler(_this, \"inputElement\", (_a = _this.props.inputProps) === null || _a === void 0 ? void 0 : _a.inputRef);\n\n    _this.handleQueryListRef = function (ref) {\n      return _this.queryList = ref;\n    };\n\n    _this.renderQueryList = function (listProps) {\n      var _a; // not using defaultProps cuz they're hard to type with generics (can't use <T> on static members)\n\n\n      var _b = _this.props,\n          fill = _b.fill,\n          _c = _b.filterable,\n          filterable = _c === void 0 ? true : _c,\n          _d = _b.disabled,\n          disabled = _d === void 0 ? false : _d,\n          _e = _b.inputProps,\n          inputProps = _e === void 0 ? {} : _e,\n          _f = _b.popoverProps,\n          popoverProps = _f === void 0 ? {} : _f,\n          matchTargetWidth = _b.matchTargetWidth;\n\n      if (fill) {\n        popoverProps.fill = true;\n      }\n\n      if (matchTargetWidth) {\n        if (popoverProps.modifiers == null) {\n          popoverProps.modifiers = {};\n        }\n\n        popoverProps.modifiers.minWidth = {\n          enabled: true,\n          fn: function (data) {\n            data.styles.width = data.offsets.reference.width + \"px\";\n            return data;\n          },\n          order: 800\n        };\n        popoverProps.usePortal = false;\n        popoverProps.wrapperTagName = \"div\";\n      }\n\n      var input = React.createElement(InputGroup, __assign({\n        leftIcon: \"search\",\n        placeholder: \"Filter...\",\n        rightElement: _this.maybeRenderClearButton(listProps.query)\n      }, inputProps, {\n        inputRef: _this.handleInputRef,\n        onChange: listProps.handleQueryChange,\n        value: listProps.query\n      }));\n      var handleKeyDown = listProps.handleKeyDown,\n          handleKeyUp = listProps.handleKeyUp;\n      return (\n        /* eslint-disable-next-line deprecation/deprecation */\n        React.createElement(Popover, __assign({\n          autoFocus: false,\n          enforceFocus: false,\n          isOpen: _this.state.isOpen,\n          disabled: disabled,\n          position: Position.BOTTOM_LEFT\n        }, popoverProps, {\n          className: classNames(listProps.className, popoverProps.className),\n          onInteraction: _this.handlePopoverInteraction,\n          popoverClassName: classNames(Classes.SELECT_POPOVER, popoverProps.popoverClassName, (_a = {}, _a[Classes.SELECT_MATCH_TARGET_WIDTH] = matchTargetWidth, _a)),\n          onOpening: _this.handlePopoverOpening,\n          onOpened: _this.handlePopoverOpened,\n          onClosing: _this.handlePopoverClosing\n        }), React.createElement(\"div\", {\n          onKeyDown: _this.state.isOpen ? handleKeyDown : _this.handleTargetKeyDown,\n          onKeyUp: _this.state.isOpen ? handleKeyUp : undefined\n        }, _this.props.children), React.createElement(\"div\", {\n          onKeyDown: handleKeyDown,\n          onKeyUp: handleKeyUp\n        }, filterable ? input : undefined, listProps.itemList))\n      );\n    };\n\n    _this.handleTargetKeyDown = function (event) {\n      // open popover when arrow key pressed on target while closed\n      // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n      // eslint-disable-next-line deprecation/deprecation\n      if (event.which === Keys.ARROW_UP || event.which === Keys.ARROW_DOWN) {\n        event.preventDefault();\n\n        _this.setState({\n          isOpen: true\n        });\n      }\n    };\n\n    _this.handleItemSelect = function (item, event) {\n      var _a, _b;\n\n      _this.setState({\n        isOpen: false\n      });\n\n      (_b = (_a = _this.props).onItemSelect) === null || _b === void 0 ? void 0 : _b.call(_a, item, event);\n    };\n\n    _this.handlePopoverInteraction = function (isOpen, event) {\n      var _a, _b;\n\n      _this.setState({\n        isOpen: isOpen\n      });\n\n      (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onInteraction) === null || _b === void 0 ? void 0 : _b.call(_a, isOpen, event);\n    };\n\n    _this.handlePopoverOpening = function (node) {\n      var _a, _b; // save currently focused element before popover steals focus, so we can restore it when closing.\n\n\n      _this.previousFocusedElement = document.activeElement;\n\n      if (_this.props.resetOnClose) {\n        _this.resetQuery();\n      }\n\n      (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onOpening) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n    };\n\n    _this.handlePopoverOpened = function (node) {\n      var _a, _b; // scroll active item into view after popover transition completes and all dimensions are stable.\n\n\n      if (_this.queryList != null) {\n        _this.queryList.scrollActiveItemIntoView();\n      }\n\n      _this.requestAnimationFrame(function () {\n        var _a;\n\n        var _b = _this.props.inputProps,\n            inputProps = _b === void 0 ? {} : _b; // autofocus is enabled by default\n\n        if (inputProps.autoFocus !== false) {\n          (_a = _this.inputElement) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n      });\n\n      (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onOpened) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n    };\n\n    _this.handlePopoverClosing = function (node) {\n      var _a, _b; // restore focus to saved element.\n      // timeout allows popover to begin closing and remove focus handlers beforehand.\n\n\n      _this.requestAnimationFrame(function () {\n        if (_this.previousFocusedElement !== undefined) {\n          _this.previousFocusedElement.focus();\n\n          _this.previousFocusedElement = undefined;\n        }\n      });\n\n      (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onClosing) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n    };\n\n    _this.resetQuery = function () {\n      return _this.queryList && _this.queryList.setQuery(\"\", true);\n    };\n\n    return _this;\n  }\n\n  Select.ofType = function () {\n    return Select;\n  };\n\n  Select.prototype.render = function () {\n    // omit props specific to this component, spread the rest.\n    var _a = this.props,\n        filterable = _a.filterable,\n        inputProps = _a.inputProps,\n        popoverProps = _a.popoverProps,\n        restProps = __rest(_a, [\"filterable\", \"inputProps\", \"popoverProps\"]);\n\n    return React.createElement(this.TypedQueryList, __assign({}, restProps, {\n      onItemSelect: this.handleItemSelect,\n      ref: this.handleQueryListRef,\n      renderer: this.renderQueryList\n    }));\n  };\n\n  Select.prototype.componentDidUpdate = function (prevProps, prevState) {\n    var _a, _b, _c, _d, _e;\n\n    if (((_a = prevProps.inputProps) === null || _a === void 0 ? void 0 : _a.inputRef) !== ((_b = this.props.inputProps) === null || _b === void 0 ? void 0 : _b.inputRef)) {\n      setRef((_c = prevProps.inputProps) === null || _c === void 0 ? void 0 : _c.inputRef, null);\n      this.handleInputRef = refHandler(this, \"inputElement\", (_d = this.props.inputProps) === null || _d === void 0 ? void 0 : _d.inputRef);\n      setRef((_e = this.props.inputProps) === null || _e === void 0 ? void 0 : _e.inputRef, this.inputElement);\n    }\n\n    if (this.state.isOpen && !prevState.isOpen && this.queryList != null) {\n      this.queryList.scrollActiveItemIntoView();\n    }\n  };\n\n  Select.prototype.maybeRenderClearButton = function (query) {\n    return query.length > 0 ? React.createElement(Button, {\n      icon: \"cross\",\n      minimal: true,\n      onClick: this.resetQuery\n    }) : undefined;\n  };\n\n  Select.displayName = DISPLAYNAME_PREFIX + \".Select\";\n  return Select;\n}(AbstractPureComponent2);\n\nexport { Select };","map":{"version":3,"sources":["../../../../src/components/select/select.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __extends, __rest } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { AbstractPureComponent2, Button, DISPLAYNAME_PREFIX, InputGroup, Keys, Popover, Position, refHandler, setRef, } from \"@blueprintjs/core\";\nimport { Classes } from \"../../common\";\nimport { QueryList } from \"../query-list/queryList\";\nvar Select = /** @class */ (function (_super) {\n    __extends(Select, _super);\n    function Select() {\n        var _a;\n        var _this = _super.apply(this, arguments) || this;\n        _this.state = { isOpen: false };\n        _this.TypedQueryList = QueryList.ofType();\n        _this.inputElement = null;\n        _this.queryList = null;\n        _this.handleInputRef = refHandler(_this, \"inputElement\", (_a = _this.props.inputProps) === null || _a === void 0 ? void 0 : _a.inputRef);\n        _this.handleQueryListRef = function (ref) { return (_this.queryList = ref); };\n        _this.renderQueryList = function (listProps) {\n            var _a;\n            // not using defaultProps cuz they're hard to type with generics (can't use <T> on static members)\n            var _b = _this.props, fill = _b.fill, _c = _b.filterable, filterable = _c === void 0 ? true : _c, _d = _b.disabled, disabled = _d === void 0 ? false : _d, _e = _b.inputProps, inputProps = _e === void 0 ? {} : _e, _f = _b.popoverProps, popoverProps = _f === void 0 ? {} : _f, matchTargetWidth = _b.matchTargetWidth;\n            if (fill) {\n                popoverProps.fill = true;\n            }\n            if (matchTargetWidth) {\n                if (popoverProps.modifiers == null) {\n                    popoverProps.modifiers = {};\n                }\n                popoverProps.modifiers.minWidth = {\n                    enabled: true,\n                    fn: function (data) {\n                        data.styles.width = data.offsets.reference.width + \"px\";\n                        return data;\n                    },\n                    order: 800,\n                };\n                popoverProps.usePortal = false;\n                popoverProps.wrapperTagName = \"div\";\n            }\n            var input = (React.createElement(InputGroup, __assign({ leftIcon: \"search\", placeholder: \"Filter...\", rightElement: _this.maybeRenderClearButton(listProps.query) }, inputProps, { inputRef: _this.handleInputRef, onChange: listProps.handleQueryChange, value: listProps.query })));\n            var handleKeyDown = listProps.handleKeyDown, handleKeyUp = listProps.handleKeyUp;\n            return (\n            /* eslint-disable-next-line deprecation/deprecation */\n            React.createElement(Popover, __assign({ autoFocus: false, enforceFocus: false, isOpen: _this.state.isOpen, disabled: disabled, position: Position.BOTTOM_LEFT }, popoverProps, { className: classNames(listProps.className, popoverProps.className), onInteraction: _this.handlePopoverInteraction, popoverClassName: classNames(Classes.SELECT_POPOVER, popoverProps.popoverClassName, (_a = {},\n                    _a[Classes.SELECT_MATCH_TARGET_WIDTH] = matchTargetWidth,\n                    _a)), onOpening: _this.handlePopoverOpening, onOpened: _this.handlePopoverOpened, onClosing: _this.handlePopoverClosing }),\n                React.createElement(\"div\", { onKeyDown: _this.state.isOpen ? handleKeyDown : _this.handleTargetKeyDown, onKeyUp: _this.state.isOpen ? handleKeyUp : undefined }, _this.props.children),\n                React.createElement(\"div\", { onKeyDown: handleKeyDown, onKeyUp: handleKeyUp },\n                    filterable ? input : undefined,\n                    listProps.itemList)));\n        };\n        _this.handleTargetKeyDown = function (event) {\n            // open popover when arrow key pressed on target while closed\n            // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n            // eslint-disable-next-line deprecation/deprecation\n            if (event.which === Keys.ARROW_UP || event.which === Keys.ARROW_DOWN) {\n                event.preventDefault();\n                _this.setState({ isOpen: true });\n            }\n        };\n        _this.handleItemSelect = function (item, event) {\n            var _a, _b;\n            _this.setState({ isOpen: false });\n            (_b = (_a = _this.props).onItemSelect) === null || _b === void 0 ? void 0 : _b.call(_a, item, event);\n        };\n        _this.handlePopoverInteraction = function (isOpen, event) {\n            var _a, _b;\n            _this.setState({ isOpen: isOpen });\n            (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onInteraction) === null || _b === void 0 ? void 0 : _b.call(_a, isOpen, event);\n        };\n        _this.handlePopoverOpening = function (node) {\n            var _a, _b;\n            // save currently focused element before popover steals focus, so we can restore it when closing.\n            _this.previousFocusedElement = document.activeElement;\n            if (_this.props.resetOnClose) {\n                _this.resetQuery();\n            }\n            (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onOpening) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n        };\n        _this.handlePopoverOpened = function (node) {\n            var _a, _b;\n            // scroll active item into view after popover transition completes and all dimensions are stable.\n            if (_this.queryList != null) {\n                _this.queryList.scrollActiveItemIntoView();\n            }\n            _this.requestAnimationFrame(function () {\n                var _a;\n                var _b = _this.props.inputProps, inputProps = _b === void 0 ? {} : _b;\n                // autofocus is enabled by default\n                if (inputProps.autoFocus !== false) {\n                    (_a = _this.inputElement) === null || _a === void 0 ? void 0 : _a.focus();\n                }\n            });\n            (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onOpened) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n        };\n        _this.handlePopoverClosing = function (node) {\n            var _a, _b;\n            // restore focus to saved element.\n            // timeout allows popover to begin closing and remove focus handlers beforehand.\n            _this.requestAnimationFrame(function () {\n                if (_this.previousFocusedElement !== undefined) {\n                    _this.previousFocusedElement.focus();\n                    _this.previousFocusedElement = undefined;\n                }\n            });\n            (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onClosing) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n        };\n        _this.resetQuery = function () { return _this.queryList && _this.queryList.setQuery(\"\", true); };\n        return _this;\n    }\n    Select.ofType = function () {\n        return Select;\n    };\n    Select.prototype.render = function () {\n        // omit props specific to this component, spread the rest.\n        var _a = this.props, filterable = _a.filterable, inputProps = _a.inputProps, popoverProps = _a.popoverProps, restProps = __rest(_a, [\"filterable\", \"inputProps\", \"popoverProps\"]);\n        return (React.createElement(this.TypedQueryList, __assign({}, restProps, { onItemSelect: this.handleItemSelect, ref: this.handleQueryListRef, renderer: this.renderQueryList })));\n    };\n    Select.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var _a, _b, _c, _d, _e;\n        if (((_a = prevProps.inputProps) === null || _a === void 0 ? void 0 : _a.inputRef) !== ((_b = this.props.inputProps) === null || _b === void 0 ? void 0 : _b.inputRef)) {\n            setRef((_c = prevProps.inputProps) === null || _c === void 0 ? void 0 : _c.inputRef, null);\n            this.handleInputRef = refHandler(this, \"inputElement\", (_d = this.props.inputProps) === null || _d === void 0 ? void 0 : _d.inputRef);\n            setRef((_e = this.props.inputProps) === null || _e === void 0 ? void 0 : _e.inputRef, this.inputElement);\n        }\n        if (this.state.isOpen && !prevState.isOpen && this.queryList != null) {\n            this.queryList.scrollActiveItemIntoView();\n        }\n    };\n    Select.prototype.maybeRenderClearButton = function (query) {\n        return query.length > 0 ? React.createElement(Button, { icon: \"cross\", minimal: true, onClick: this.resetQuery }) : undefined;\n    };\n    Select.displayName = DISPLAYNAME_PREFIX + \".Select\";\n    return Select;\n}(AbstractPureComponent2));\nexport { Select };\n//# sourceMappingURL=select.js.map"]},"metadata":{},"sourceType":"module"}